nav#sidebar
  ul
    li(class=(selectedCategory==='Home'?'active':''))
      a(href='/') Home
    each category in categories
      li(class=(selectedCategory === category.name ? "active" : ""))
        a(href=`/category/${category._id}`) #{category.name}
        div(style=`display: ${selectedCategory === category.name ?'flex':'none'}`)
          <i onClick='showCategoryEditForm(this)' data-category-id='#{category._id}' class="fa-solid fa-pen-to-square"></i>
          form(method='POST' action=`/category/${category._id}/delete`)
            button(type='submit') 
              <i class="fa-solid fa-trash"></i>
      
      if errors
        ul(style=`display: ${selectedCategory === category.name ?'flex':'none'};color: rebeccapurple;padding:0px`)
          each error in errors
            li= error.msg
    
    script.
      const listItem = document.querySelector('.active')
      let formToBeAddedHtml;
      
      function showCategoryEditForm(item){
        const categoryId = item.getAttribute('data-category-id');
        const formToBeAddedStr = `<form method='POST' class='categoryUpdateForm' action=/category/${categoryId}/update>` +
          "<input type='text' name='categoryName' value='" + listItem.childNodes[0].textContent + "'/>" +
          "<button type='submit'><i class='fa-solid fa-check fa-xl' style='color: #4e9a06;'></i></button>" +
          "<i onClick='removeForm()' class='fa-solid fa-xmark fa-lg' style='color: #ff0000;'></i>" +
          "</form>";

        const parser =new DOMParser()
        const doc = parser.parseFromString(formToBeAddedStr,'text/html');
        formToBeAddedHtml = doc.body.firstChild;

        listItem.parentNode.replaceChild(formToBeAddedHtml,listItem)
      }

      function removeForm(){
        formToBeAddedHtml.parentNode.replaceChild(listItem,formToBeAddedHtml)
      }